<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Webシステム開発料金表 - 実際の動作を見て選べる機能一覧</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* デザインシステム - 色とサイズの統一 */
    :root {
      --primary-blue: #2563eb;
      --primary-blue-light: #3b82f6;
      --success-green: #059669;
      --warning-orange: #d97706;
      --danger-red: #dc2626;
      --gray-50: #f8fafc;
      --gray-100: #f1f5f9;
      --gray-200: #e2e8f0;
      --gray-600: #475569;
      --gray-800: #1e293b;
      --shadow-card: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1);
      --shadow-elevated: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
      --radius-card: 16px;
      --radius-button: 8px;
    }

    /* 統一されたカードスタイル */
    .card {
      background: white;
      border: 1px solid var(--gray-200);
      border-radius: var(--radius-card);
      box-shadow: var(--shadow-card);
      transition: all 0.2s ease;
    }
    .card:hover {
      box-shadow: var(--shadow-elevated);
      border-color: var(--primary-blue);
    }

    /* 統一されたボタンスタイル */
    .btn {
      padding: 8px 16px;
      border-radius: var(--radius-button);
      font-size: 14px;
      font-weight: 500;
      transition: all 0.2s ease;
      cursor: pointer;
      border: 1px solid var(--gray-200);
    }
    .btn:hover {
      background-color: var(--gray-50);
      border-color: var(--primary-blue);
    }
    .btn-primary {
      background-color: var(--primary-blue);
      color: white;
      border-color: var(--primary-blue);
    }
    .btn-primary:hover {
      background-color: var(--primary-blue-light);
    }

    /* 価格表示の統一 */
    .price {
      font-weight: 700;
      color: var(--primary-blue);
      font-size: 16px;
    }
    .price-large {
      font-size: 24px;
    }

    /* 推奨バッジ */
    .recommended {
      background: linear-gradient(135deg, var(--success-green), #10b981);
      color: white;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      text-shadow: 0 1px 2px rgba(0,0,0,0.1);
    }

    /* カテゴリ別の色分け */
    .category-frontend { border-left: 4px solid #3b82f6; }
    .category-backend { border-left: 4px solid #059669; }
    .category-infra { border-left: 4px solid #d97706; }
    .category-db { border-left: 4px solid #7c3aed; }
    .category-support { border-left: 4px solid #be185d; }

    /* 既存のスタイル（改良版） */
    .wire { 
      background: repeating-linear-gradient(45deg, var(--gray-200), var(--gray-200) 10px, var(--gray-50) 10px, var(--gray-50) 20px);
    }
    .grid-overlay::after{
      content:"";position:absolute;inset:0;pointer-events:none;
      background-image:
        linear-gradient(to right, rgba(59,130,246,.35) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(59,130,246,.35) 1px, transparent 1px);
      background-size: var(--tile,128px) var(--tile,128px);
    }
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}
    summary::-webkit-details-marker{display:none}
    .badge{
      font-size: 11px;
      background-color: var(--gray-100);
      border: 1px solid var(--gray-200);
      padding: 2px 8px;
      border-radius: 12px;
      color: var(--gray-600);
    }
    .table-cell p{margin:.25rem 0}
    .foot{font-size:11px; color: var(--gray-600);}
    .note{color: var(--danger-red); font-weight:600}

    /* チェックボックスの改良 */
    input[type="checkbox"] {
      width: 18px;
      height: 18px;
      accent-color: var(--primary-blue);
    }

    /* 進捗バーの統一 */
    .progress-bar {
      height: 8px;
      background-color: var(--gray-200);
      border-radius: 4px;
      overflow: hidden;
    }
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--primary-blue), var(--primary-blue-light));
      transition: width 0.3s ease;
    }
  </style>
</head>
<body class="bg-slate-50 text-slate-800">
  <!-- Header -->
  <header class="bg-white border-b sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-4 py-4 flex items-center justify-between">
      <h1 class="text-base md:text-xl font-bold">Webシステム開発料金表 - 実際の動作を見てから選択</h1>
      <nav class="hidden md:flex gap-4 text-xs md:text-sm">
        <a href="#quick" class="hover:underline">料金一覧表</a>
        <a href="#fe" class="hover:underline">画面機能</a>
        <a href="#be" class="hover:underline">処理機能</a>
        <a href="#infra" class="hover:underline">公開・運用</a>
        <a href="#db" class="hover:underline">データ保存</a>
        <a href="#support" class="hover:underline">アフターサポート</a>
      </nav>
    </div>
  </header>

  <!-- Controls -->
  <section class="max-w-7xl mx-auto px-4 py-4">
    <div class="card p-4 flex flex-col md:flex-row md:items-center md:justify-between gap-3">
      <div class="text-sm">
        <p>チェックを入れると料金に追加されます。<strong>上の一覧表</strong>と<strong>下の実演画面</strong>は同じ項目です（どちらでチェックしても同じ機能が選ばれます）。</p>
      </div>
      <div class="flex gap-2">
        <button id="selectAll" class="btn btn-primary">全選択</button>
        <button id="clearAll" class="btn">全解除</button>
      </div>
    </div>
  </section>

  <!-- ===================== QUICK TABLES (PROXY CHECKBOXES) ===================== -->
  <main class="max-w-7xl mx-auto px-4 pb-28">
    <section id="quick" class="mb-10">
      <h2 class="text-xl font-bold mb-3">機能と料金の一覧表（チェックして下の実演画面で動作確認）</h2>
      <p class="text-xs text-slate-600 mb-4">各行のチェックボックスと下の実演画面は連動しています。表示価格は税込です。</p>

      <!-- Frontend table -->
      <div class="card category-frontend mb-8 overflow-x-auto">
        <div class="px-4 py-3 border-b font-semibold flex items-center justify-between">
          <span>画面機能（お客さまが実際に操作する部分）</span>
          <span class="text-xs text-gray-600">基本的な画面操作に必要</span>
        </div>
        <table class="min-w-full text-sm">
          <thead class="bg-slate-100 text-left">
            <tr>
              <th class="px-3 py-2 w-10">選択</th>
              <th class="px-3 py-2">機能名</th>
              <th class="px-3 py-2 w-28">価格</th>
              <th class="px-3 py-2">含まれる機能</th>
              <th class="px-3 py-2">お客さまにとっての効果</th>
            </tr>
          </thead>
          <tbody class="align-top">
            <tr class="border-t">
              <td class="px-3 py-2"><input type="checkbox" class="proxy" data-target="#fe_file_upload"></td>
              <td class="px-3 py-2">
                <div class="flex items-center gap-2">
                  <a href="#art_fe_file_upload" class="text-blue-600 underline">ファイルアップロード</a>
                  <span class="recommended">推奨</span>
                </div>
              </td>
              <td class="px-3 py-2"><span class="price">3,000円</span></td>
              <td class="px-3 py-2 table-cell">
                <p>• Excel・CSV・画像ファイル対応（20MBまで）</p>
                <p>• 進捗表示・エラー理由表示</p>
                <p>• 画像プレビュー・サイズ自動調整</p>
              </td>
              <td class="px-3 py-2 table-cell">
                <p>どんな種類のファイルでも簡単アップロード。</p>
                <p>進捗が見えるので安心。失敗理由もすぐ分かる。</p>
                <p>画像は選んだ瞬間にプレビュー表示。</p>
              </td>
            </tr>
            <tr class="border-t">
              <td class="px-3 py-2"><input type="checkbox" class="proxy" data-target="#fe_data_display"></td>
              <td class="px-3 py-2">
                <div class="flex items-center gap-2">
                  <a href="#art_fe_data_display" class="text-blue-600 underline">データ表示・検索</a>
                  <span class="recommended">推奨</span>
                </div>
              </td>
              <td class="px-3 py-2"><span class="price">5,000円</span></td>
              <td class="px-3 py-2 table-cell">
                <p>• 表形式表示・並び替え・ページ送り</p>
                <p>• 期間・分類・キーワード絞り込み</p>
                <p>• 高速検索（1万件を0.1秒で処理）</p>
              </td>
              <td class="px-3 py-2 table-cell">
                <p>大量データも見やすい表で表示。</p>
                <p>欲しい情報だけを瞬時に絞り込み。</p>
                <p>URLで検索条件を他の人と共有可能。</p>
              </td>
            </tr>
            <tr class="border-t">
              <td class="px-3 py-2"><input type="checkbox" class="proxy" data-target="#fe_bulk_management"></td>
              <td class="px-3 py-2"><a href="#art_fe_bulk_management" class="text-blue-600 underline">大量処理管理</a></td>
              <td class="px-3 py-2"><span class="price">5,000円</span></td>
              <td class="px-3 py-2 table-cell">
                <p>• 大量データの並列処理</p>
                <p>• リアルタイム進捗表示</p>
                <p>• 処理のキャンセル・再開機能</p>
              </td>
              <td class="px-3 py-2 table-cell">
                <p>大量の作業も効率的に処理。</p>
                <p>進捗と残り時間が分かるので安心。</p>
                <p>不要になったら途中で停止可能。</p>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Backend table -->
      <div class="card category-backend mb-8 overflow-x-auto">
        <div class="px-4 py-3 border-b font-semibold flex items-center justify-between">
          <span>処理機能（データを加工・変換する部分）</span>
          <span class="text-xs text-gray-600">データ処理の効率化に必要</span>
        </div>
        <table class="min-w-full text-sm">
          <thead class="bg-slate-100 text-left">
            <tr>
              <th class="px-3 py-2 w-10">選択</th>
              <th class="px-3 py-2">機能名</th>
              <th class="px-3 py-2 w-28">価格</th>
              <th class="px-3 py-2">含まれる機能</th>
              <th class="px-3 py-2">お客さまにとっての効果</th>
            </tr>
          </thead>
          <tbody class="align-top">
            <tr class="border-t">
              <td class="px-3 py-2"><input type="checkbox" class="proxy" data-target="#be_data_processing"></td>
              <td class="px-3 py-2">
                <div class="flex items-center gap-2">
                  <a href="#art_be_data_processing" class="text-blue-600 underline">データ処理</a>
                  <span class="recommended">推奨</span>
                </div>
              </td>
              <td class="px-3 py-2"><span class="price">3,000円</span></td>
              <td class="px-3 py-2 table-cell">
                <p>• Excel・CSV読み込み（列名自動対応）</p>
                <p>• 日付・数値の書式統一</p>
                <p>• 画像サイズ自動調整</p>
              </td>
              <td class="px-3 py-2 table-cell">
                <p>既存のExcelファイルをそのまま使用可能。</p>
                <p>データ形式のバラツキを自動で統一。</p>
                <p>集計・分析で間違いが起こらない。</p>
              </td>
            </tr>
            <tr class="border-t">
              <td class="px-3 py-2"><input type="checkbox" class="proxy" data-target="#be_ai_functions"></td>
              <td class="px-3 py-2"><a href="#art_be_ai_functions" class="text-blue-600 underline">AI機能</a></td>
              <td class="px-3 py-2"><span class="price">8,000円</span></td>
              <td class="px-3 py-2 table-cell">
                <p>• 高精度プロンプト設計・検証</p>
                <p>• 複数パターン一括生成</p>
                <p>• 知識ベース連携・エラー自動修正</p>
              </td>
              <td class="px-3 py-2 table-cell">
                <p>AIが毎回同じ品質で結果を生成。</p>
                <p>複数のパターンから最適なものを選択。</p>
                <p>専門知識を組み込んで精度向上。</p>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Infra table -->
      <div class="card category-infra mb-8 overflow-x-auto">
        <div class="px-4 py-3 border-b font-semibold flex items-center justify-between">
          <span>公開・運用（システムを世界に公開）</span>
          <span class="text-xs text-gray-600">システム公開時に必須</span>
        </div>
        <table class="min-w-full text-sm">
          <thead class="bg-slate-100 text-left">
            <tr>
              <th class="px-3 py-2 w-10">選択</th>
              <th class="px-3 py-2">機能名</th>
              <th class="px-3 py-2 w-28">価格</th>
              <th class="px-3 py-2">含まれる機能</th>
              <th class="px-3 py-2">お客さまにとっての効果</th>
            </tr>
          </thead>
          <tbody class="align-top">
            <tr class="border-t">
              <td class="px-3 py-2"><input type="checkbox" class="proxy" data-target="#infra_deployment"></td>
              <td class="px-3 py-2">
                <div class="flex items-center gap-2">
                  <a href="#art_infra_deployment" class="text-blue-600 underline">システム公開・監視</a>
                  <span class="recommended">推奨</span>
                </div>
              </td>
              <td class="px-3 py-2"><span class="price">3,000円</span></td>
              <td class="px-3 py-2 table-cell">
                <p>• 自動デプロイ（CI/CD）</p>
                <p>• 稼働監視・アラート通知</p>
                <p>• ログ保存・エラー追跡</p>
              </td>
              <td class="px-3 py-2 table-cell">
                <p>システムをインターネットで公開。</p>
                <p>修正が自動で反映される。</p>
                <p>問題発生時はメールで通知。</p>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- DB table -->
      <div class="card category-db mb-8 overflow-x-auto">
        <div class="px-4 py-3 border-b font-semibold flex items-center justify-between">
          <span>データ保存（情報を保存・管理）</span>
          <span class="text-xs text-gray-600">データ管理に必要</span>
        </div>
        <table class="min-w-full text-sm">
          <thead class="bg-slate-100 text-left">
            <tr>
              <th class="px-3 py-2 w-10">選択</th>
              <th class="px-3 py-2">機能名</th>
              <th class="px-3 py-2 w-28">価格</th>
              <th class="px-3 py-2">含まれる機能</th>
              <th class="px-3 py-2">お客さまにとっての効果</th>
            </tr>
          </thead>
          <tbody class="align-top">
            <tr class="border-t">
              <td class="px-3 py-2"><input type="checkbox" class="proxy" data-target="#db_system"></td>
              <td class="px-3 py-2">
                <div class="flex items-center gap-2">
                  <a href="#art_db_system" class="text-blue-600 underline">データベース設計・構築</a>
                  <span class="recommended">推奨</span>
                </div>
              </td>
              <td class="px-3 py-2"><span class="price">3,000円</span></td>
              <td class="px-3 py-2 table-cell">
                <p>• データベース設計・設計書</p>
                <p>• 登録・更新・削除機能</p>
                <p>• エラーハンドリング</p>
              </td>
              <td class="px-3 py-2 table-cell">
                <p>データを安全に保存・管理。</p>
                <p>情報の登録・更新・削除が可能。</p>
                <p>エラー時は理由が明確に表示。</p>
              </td>
            </tr>
            <tr class="border-t">
              <td class="px-3 py-2"><input type="checkbox" class="proxy" data-target="#db_file_storage"></td>
              <td class="px-3 py-2"><a href="#art_db_file_storage" class="text-blue-600 underline">ファイル保存</a></td>
              <td class="px-3 py-2"><span class="price">2,000円</span></td>
              <td class="px-3 py-2 table-cell">
                <p>• 生成ファイルの自動保存</p>
                <p>• ファイル一覧・ダウンロード</p>
                <p>• 履歴管理（上書き防止）</p>
              </td>
              <td class="px-3 py-2 table-cell">
                <p>作成したファイルが自動で保存される。</p>
                <p>過去のファイルを一覧で確認・ダウンロード。</p>
                <p>上書きされず履歴が残る。</p>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Support table -->
      <div class="card category-support overflow-x-auto">
        <div class="px-4 py-3 border-b font-semibold flex items-center justify-between">
          <span>アフターサポート（継続的な保守）</span>
          <span class="text-xs text-gray-600">運用開始後に必要</span>
        </div>
        <table class="min-w-full text-sm">
          <thead class="bg-slate-100 text-left">
            <tr>
              <th class="px-3 py-2 w-10">選択</th>
              <th class="px-3 py-2">機能名</th>
              <th class="px-3 py-2 w-36">価格</th>
              <th class="px-3 py-2">含まれるサービス</th>
              <th class="px-3 py-2">お客さまにとっての効果</th>
            </tr>
          </thead>
          <tbody class="align-top">
            <tr class="border-t">
              <td class="px-3 py-2"><input type="checkbox" class="proxy" data-target="#support_light"></td>
              <td class="px-3 py-2"><a href="#art_support_light" class="text-blue-600 underline">保守（ライト）</a></td>
              <td class="px-3 py-2"><span class="price">2,000円</span> <span class="text-xs text-gray-600">/ 月</span></td>
              <td class="px-3 py-2 table-cell">
                <p>• メール相談・軽微修正（月1回・1時間以内）</p>
                <p>• 平日10:00-18:00対応</p>
                <p>• 初回返信24時間以内</p>
              </td>
              <td class="px-3 py-2 table-cell">
                <p>月1回の小修正を依頼可能。</p>
                <p>対応時間と返信目安が明確。</p>
                <p>安心して運用を継続。</p>
              </td>
            </tr>
            <tr class="border-t">
              <td class="px-3 py-2"><input type="checkbox" class="proxy" data-target="#support_std"></td>
              <td class="px-3 py-2"><a href="#art_support_std" class="text-blue-600 underline">保守（スタンダード）</a></td>
              <td class="px-3 py-2"><span class="price">3,000円</span> <span class="text-xs text-gray-600">/ 月</span></td>
              <td class="px-3 py-2 table-cell">
                <p>• メール相談・軽微修正（月2回・各1時間以内）</p>
                <p>• 平日10:00-18:00対応</p>
                <p>• 初回返信8時間以内</p>
              </td>
              <td class="px-3 py-2 table-cell">
                <p>月2回まで修正依頼可能。</p>
                <p>返信が速く運用の手間を削減。</p>
                <p>積極的な改善提案も対応。</p>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- ===================== DEMO CARDS (REAL CHECKBOXES FOR PRICING) ===================== -->

    <!-- ===== Frontend ===== -->
    <section id="fe" class="mb-10">
      <h2 class="text-xl font-bold mb-3">画面機能 - 実演画面で動作確認</h2>
      <div class="grid gap-6">

        <!-- FE: File Upload (Combined) -->
        <article id="art_fe_file_upload" class="card">
          <div class="px-4 py-3 border-b flex flex-wrap items-center justify-between gap-2">
            <label class="flex items-center gap-3 cursor-pointer">
              <input id="fe_file_upload" type="checkbox" class="feature-toggle h-5 w-5" data-price="3000" data-key="fe_file_upload" />
              <span class="font-semibold">ファイルアップロード</span>
              <span class="badge">.xlsx/.csv/.png/.jpg ≤20MB</span>
            </label>
            <div class="price">3,000円</div>
          </div>
          <div class="grid md:grid-cols-2">
            <div class="p-4 border-r">
              <div class="text-[11px] font-semibold text-slate-500 mb-2">含まれる機能</div>
              <ul class="list-disc ml-5 text-sm space-y-1">
                <li>Excel・CSV・画像ファイル対応</li>
                <li>進捗表示・エラー理由表示</li>
                <li>画像プレビュー・サイズ自動調整</li>
              </ul>
            </div>
            <div class="p-4">
              <div class="text-[11px] font-semibold text-slate-500 mb-2">お客さまにとっての効果</div>
              <ul class="list-disc ml-5 text-sm space-y-1">
                <li>どんな種類のファイルでも簡単アップロード</li>
                <li>進捗が見えるので安心</li>
                <li>画像は選んだ瞬間にプレビュー表示</li>
              </ul>
            </div>
          </div>
          <div class="px-4 py-3 border-t">
            <details>
              <summary class="cursor-pointer text-sm font-semibold">実際に動かしてみる（ファイルアップロード＋プレビュー）</summary>
              <div class="mt-3 grid md:grid-cols-2 gap-3">
                <div class="bg-slate-50 border rounded-lg p-3">
                  <div class="text-xs font-semibold mb-2">1. ファイル選択</div>
                  <div class="space-y-2">
                    <button id="demoCsvBtn" class="btn btn-primary w-full">サンプルCSVを読み込む</button>
                    <button id="imgPreviewBtn" class="btn w-full">画像プレビューを表示</button>
                    <span id="uploadStatus" class="text-xs text-slate-500 block">未実行</span>
                  </div>
                </div>
                <div class="bg-slate-50 border rounded-lg p-3">
                  <div class="text-xs font-semibold mb-2">2. 結果表示</div>
                  <div id="uploadResult" class="h-32 border rounded bg-white flex items-center justify-center text-xs text-slate-500">
                    ここに結果が表示されます
                  </div>
                </div>
              </div>
            </details>
          </div>
        </article>

        <!-- FE: Data Display -->
        <article id="art_fe_data_display" class="card">
          <div class="px-4 py-3 border-b flex flex-wrap items-center justify-between gap-2">
            <label class="flex items-center gap-3 cursor-pointer">
              <input id="fe_data_display" type="checkbox" class="feature-toggle h-5 w-5" data-price="5000" data-key="fe_data_display" />
              <span class="font-semibold">データ表示・検索</span>
            </label>
            <div class="price">5,000円</div>
          </div>
          <div class="grid md:grid-cols-2">
            <div class="p-4 border-r">
              <div class="text-[11px] font-semibold text-slate-500 mb-2">含まれる機能</div>
              <ul class="list-disc ml-5 text-sm space-y-1">
                <li>表形式表示・並び替え・ページ送り</li>
                <li>期間・分類・キーワード絞り込み</li>
                <li>高速検索（1万件を0.1秒で処理）</li>
              </ul>
            </div>
            <div class="p-4">
              <div class="text-[11px] font-semibold text-slate-500 mb-2">お客さまにとっての効果</div>
              <ul class="list-disc ml-5 text-sm space-y-1">
                <li>大量データも見やすい表で表示</li>
                <li>欲しい情報だけを瞬時に絞り込み</li>
                <li>URLで検索条件を他の人と共有可能</li>
              </ul>
            </div>
          </div>
          <div class="px-4 py-3 border-t">
            <details open>
              <summary class="cursor-pointer text-sm font-semibold">実際に動かしてみる（表の並び替え・絞り込み・ページ送り）</summary>
              <div class="mt-3 space-y-2">
                <div class="flex flex-wrap items-end gap-2">
                  <div><label class="text-xs block">キーワード</label><input id="kw" class="border rounded px-2 py-1 text-sm" placeholder="例: campaign" /></div>
                  <div><label class="text-xs block">カテゴリ</label><select id="cat" class="border rounded px-2 py-1 text-sm"><option value="">すべて</option></select></div>
                  <button id="applyFilter" class="btn btn-primary">絞り込み</button>
                </div>
                <div class="overflow-x-auto">
                  <table class="min-w-full text-xs border" id="tbl">
                    <thead class="bg-slate-100">
                      <tr>
                        <th data-k="id" class="px-2 py-1 border cursor-pointer">id</th>
                        <th data-k="date" class="px-2 py-1 border cursor-pointer">date</th>
                        <th data-k="category" class="px-2 py-1 border cursor-pointer">category</th>
                        <th data-k="text" class="px-2 py-1 border cursor-pointer">text</th>
                      </tr>
                    </thead>
                    <tbody></tbody>
                  </table>
                </div>
                <div class="flex items-center gap-2">
                  <button id="prev" class="btn text-xs">前へ</button>
                  <span id="pginfo" class="text-xs text-slate-600">1 / 1</span>
                  <button id="next" class="btn text-xs">次へ</button>
                  <button id="exportCsv" class="btn text-xs ml-auto">CSVダウンロード</button>
                </div>
              </div>
            </details>
          </div>
        </article>

        <!-- FE: Bulk Management -->
        <article id="art_fe_bulk_management" class="card">
          <div class="px-4 py-3 border-b flex flex-wrap items-center justify-between gap-2">
            <label class="flex items-center gap-3 cursor-pointer">
              <input id="fe_bulk_management" type="checkbox" class="feature-toggle h-5 w-5" data-price="5000" data-key="fe_bulk_management" />
              <span class="font-semibold">大量処理管理</span>
            </label>
            <div class="price">5,000円</div>
          </div>
          <div class="grid md:grid-cols-2">
            <div class="p-4 border-r">
              <div class="text-[11px] font-semibold text-slate-500 mb-2">含まれる機能</div>
              <ul class="list-disc ml-5 text-sm space-y-1">
                <li>大量データの並列処理</li>
                <li>リアルタイム進捗表示</li>
                <li>処理のキャンセル・再開機能</li>
              </ul>
            </div>
            <div class="p-4">
              <div class="text-[11px] font-semibold text-slate-500 mb-2">お客さまにとっての効果</div>
              <ul class="list-disc ml-5 text-sm space-y-1">
                <li>大量の作業も効率的に処理</li>
                <li>進捗と残り時間が分かるので安心</li>
                <li>不要になったら途中で停止可能</li>
              </ul>
            </div>
          </div>
          <div class="px-4 py-3 border-t">
            <details>
              <summary class="cursor-pointer text-sm font-semibold">実際に動かしてみる（進捗表示・キャンセル機能）</summary>
              <div class="mt-3 flex flex-col sm:flex-row gap-3">
                <div class="sm:w-60 bg-slate-50 border rounded-lg p-3">
                  <div class="text-xs font-semibold mb-2">操作</div>
                  <button id="taskStart" class="btn btn-primary">開始</button>
                  <button id="taskCancel" class="btn ml-2">キャンセル</button>
                  <div class="text-xs text-slate-500 mt-2">Task ID: <span id="taskId">-</span></div>
                </div>
                <div class="flex-1 bg-slate-50 border rounded-lg p-3">
                  <div class="text-xs font-semibold mb-2">進捗</div>
                  <div class="progress-bar"><div id="taskBar" class="progress-fill" style="width:0%"></div></div>
                  <div class="text-xs mt-2">状態: <span id="taskState">待機</span> / <span id="taskPct">0%</span></div>
                </div>
              </div>
            </details>
          </div>
        </article>

      </div>
    </section>

    <!-- ===== Backend ===== -->
    <section id="be" class="mb-10">
      <h2 class="text-xl font-bold mb-3">処理機能 - データ加工・変換</h2>
      <div class="grid gap-6">

        <!-- BE: Data Processing -->
        <article id="art_be_data_processing" class="card">
          <div class="px-4 py-3 border-b flex flex-wrap items-center justify-between gap-2">
            <label class="flex items-center gap-3 cursor-pointer">
              <input id="be_data_processing" type="checkbox" class="feature-toggle h-5 w-5" data-price="3000" data-key="be_data_processing" />
              <span class="font-semibold">データ処理</span>
            </label>
            <div class="price">3,000円</div>
          </div>
          <div class="grid md:grid-cols-2">
            <div class="p-4 border-r">
              <div class="text-[11px] font-semibold text-slate-500 mb-2">含まれる機能</div>
              <ul class="list-disc ml-5 text-sm space-y-1">
                <li>Excel・CSV読み込み（列名自動対応）</li>
                <li>日付・数値の書式統一</li>
                <li>画像サイズ自動調整</li>
              </ul>
            </div>
            <div class="p-4">
              <div class="text-[11px] font-semibold text-slate-500 mb-2">お客さまにとっての効果</div>
              <ul class="list-disc ml-5 text-sm space-y-1">
                <li>既存のExcelファイルをそのまま使用可能</li>
                <li>データ形式のバラツキを自動で統一</li>
                <li>集計・分析で間違いが起こらない</li>
              </ul>
            </div>
          </div>
        </article>

        <!-- BE: AI Functions -->
        <article id="art_be_ai_functions" class="card">
          <div class="px-4 py-3 border-b flex flex-wrap items-center justify-between gap-2">
            <label class="flex items-center gap-3 cursor-pointer">
              <input id="be_ai_functions" type="checkbox" class="feature-toggle h-5 w-5" data-price="8000" data-key="be_ai_functions" />
              <span class="font-semibold">AI機能</span>
            </label>
            <div class="price">8,000円</div>
          </div>
          <div class="grid md:grid-cols-2">
            <div class="p-4 border-r">
              <div class="text-[11px] font-semibold text-slate-500 mb-2">含まれる機能</div>
              <ul class="list-disc ml-5 text-sm space-y-1">
                <li>高精度プロンプト設計・検証</li>
                <li>複数パターン一括生成</li>
                <li>知識ベース連携・エラー自動修正</li>
              </ul>
            </div>
            <div class="p-4">
              <div class="text-[11px] font-semibold text-slate-500 mb-2">お客さまにとっての効果</div>
              <ul class="list-disc ml-5 text-sm space-y-1">
                <li>AIが毎回同じ品質で結果を生成</li>
                <li>複数のパターンから最適なものを選択</li>
                <li>専門知識を組み込んで精度向上</li>
              </ul>
            </div>
          </div>
          <div class="px-4 py-3 border-t">
            <details>
              <summary class="cursor-pointer text-sm font-semibold">実際に動かしてみる（AI生成・段階的フロー）</summary>
              <div class="mt-3 space-y-3">
                <div class="flex items-end gap-3">
                  <div><label class="text-xs block">キーワード</label><input id="kwStep" class="border rounded px-2 py-1 text-sm" placeholder="例: 時短レシピ" /></div>
                  <label class="flex items-center gap-2 text-sm"><input id="useAI" type="checkbox" class="h-4 w-4"> AI生成を使用</label>
                  <button id="genIdeas" class="btn btn-primary">①案を生成</button>
                </div>
                <div class="grid md:grid-cols-3 gap-3">
                  <div class="bg-slate-50 border rounded-lg p-3"><div class="text-xs font-semibold mb-2">① 案の一覧</div><select size="6" id="ideas" class="w-full border rounded text-xs p-2"></select></div>
                  <div class="bg-slate-50 border rounded-lg p-3">
                    <div class="flex items-center justify-between mb-2"><div class="text-xs font-semibold">② 見出し</div><button id="genHeads" class="btn text-xs">生成</button></div>
                    <select size="6" id="heads" class="w-full border rounded text-xs p-2"></select>
                  </div>
                  <div class="bg-slate-50 border rounded-lg p-3">
                    <div class="flex items-center justify-between mb-2"><div class="text-xs font-semibold">③ 本文</div><button id="genBody" class="btn text-xs">生成</button></div>
                    <textarea id="bodyOut" class="w-full h-32 border rounded text-xs p-2"></textarea>
                  </div>
                </div>
              </div>
            </details>
          </div>
        </article>

      </div>
    </section>

    <!-- ===== Infra ===== -->
    <section id="infra" class="mb-10">
      <h2 class="text-xl font-bold mb-3">公開・運用</h2>
      <div class="grid gap-6">

        <article id="art_infra_deployment" class="card">
          <div class="px-4 py-3 border-b flex items-center justify-between">
            <label class="flex items-center gap-3 cursor-pointer">
              <input id="infra_deployment" type="checkbox" class="feature-toggle h-5 w-5" data-price="3000" data-key="infra_deployment" />
              <span class="font-semibold">システム公開・監視</span>
            </label>
            <div class="price">3,000円</div>
          </div>
          <div class="grid md:grid-cols-2">
            <div class="p-4 border-r">
              <div class="text-[11px] font-semibold text-slate-500 mb-2">含まれる機能</div>
              <ul class="list-disc ml-5 text-sm space-y-1">
                <li>自動デプロイ（CI/CD）</li>
                <li>稼働監視・アラート通知</li>
                <li>ログ保存・エラー追跡</li>
              </ul>
            </div>
            <div class="p-4">
              <div class="text-[11px] font-semibold text-slate-500 mb-2">お客さまにとっての効果</div>
              <ul class="list-disc ml-5 text-sm space-y-1">
                <li>システムをインターネットで公開</li>
                <li>修正が自動で反映される</li>
                <li>問題発生時はメールで通知</li>
              </ul>
            </div>
          </div>
        </article>

      </div>
    </section>

    <!-- ===== Database ===== -->
    <section id="db" class="mb-10">
      <h2 class="text-xl font-bold mb-3">データ保存</h2>
      <div class="grid gap-6">

        <article id="art_db_system" class="card">
          <div class="px-4 py-3 border-b flex items-center justify-between">
            <label class="flex items-center gap-3 cursor-pointer">
              <input id="db_system" type="checkbox" class="feature-toggle h-5 w-5" data-price="3000" data-key="db_system" />
              <span class="font-semibold">データベース設計・構築</span>
            </label>
            <div class="price">3,000円</div>
          </div>
          <div class="grid md:grid-cols-2">
            <div class="p-4 border-r">
              <div class="text-[11px] font-semibold text-slate-500 mb-2">含まれる機能</div>
              <ul class="list-disc ml-5 text-sm space-y-1">
                <li>データベース設計・設計書</li>
                <li>登録・更新・削除機能</li>
                <li>エラーハンドリング</li>
              </ul>
            </div>
            <div class="p-4">
              <div class="text-[11px] font-semibold text-slate-500 mb-2">お客さまにとっての効果</div>
              <ul class="list-disc ml-5 text-sm space-y-1">
                <li>データを安全に保存・管理</li>
                <li>情報の登録・更新・削除が可能</li>
                <li>エラー時は理由が明確に表示</li>
              </ul>
            </div>
          </div>
        </article>

        <article id="art_db_file_storage" class="card">
          <div class="px-4 py-3 border-b flex items-center justify-between">
            <label class="flex items-center gap-3 cursor-pointer">
              <input id="db_file_storage" type="checkbox" class="feature-toggle h-5 w-5" data-price="2000" data-key="db_file_storage" />
              <span class="font-semibold">ファイル保存</span>
            </label>
            <div class="price">2,000円</div>
          </div>
          <div class="grid md:grid-cols-2">
            <div class="p-4 border-r">
              <div class="text-[11px] font-semibold text-slate-500 mb-2">含まれる機能</div>
              <ul class="list-disc ml-5 text-sm space-y-1">
                <li>生成ファイルの自動保存</li>
                <li>ファイル一覧・ダウンロード</li>
                <li>履歴管理（上書き防止）</li>
              </ul>
            </div>
            <div class="p-4">
              <div class="text-[11px] font-semibold text-slate-500 mb-2">お客さまにとっての効果</div>
              <ul class="list-disc ml-5 text-sm space-y-1">
                <li>作成したファイルが自動で保存される</li>
                <li>過去のファイルを一覧で確認・ダウンロード</li>
                <li>上書きされず履歴が残る</li>
              </ul>
            </div>
          </div>
        </article>

      </div>
    </section>

    <!-- ===== Support ===== -->
    <section id="support" class="mb-10">
      <h2 class="text-xl font-bold mb-3">アフターサポート</h2>
      <div class="grid gap-6">
        <article id="art_support_light" class="card">
          <div class="px-4 py-3 border-b flex items-center justify-between">
            <label class="flex items-center gap-3 cursor-pointer">
              <input id="support_light" type="checkbox" class="feature-toggle h-5 w-5" data-price="2000" data-key="support_light" data-period="monthly" />
              <span class="font-semibold">保守（ライト）</span>
            </label>
            <div class="price">2,000円 <span class="text-xs text-gray-600">/ 月</span></div>
          </div>
          <div class="p-4 text-sm">メール相談・軽微修正 月1回（1時間以内）、平日10:00–18:00、初回返信24時間以内</div>
        </article>
        <article id="art_support_std" class="card">
          <div class="px-4 py-3 border-b flex items-center justify-between">
            <label class="flex items-center gap-3 cursor-pointer">
              <input id="support_std" type="checkbox" class="feature-toggle h-5 w-5" data-price="3000" data-key="support_std" data-period="monthly" />
              <span class="font-semibold">保守（スタンダード）</span>
            </label>
            <div class="price">3,000円 <span class="text-xs text-gray-600">/ 月</span></div>
          </div>
          <div class="p-4 text-sm">メール相談・軽微修正 月2回（各1時間以内）、平日10:00–18:00、初回返信8時間以内</div>
        </article>
      </div>
    </section>

  </main>

  <!-- ===== Floating Summary ===== -->
  <aside class="fixed bottom-4 right-4 left-4 md:left-auto md:w-[28rem] card shadow-elevated p-6">
    <div class="flex items-center justify-between mb-3">
      <h3 class="font-bold text-lg">選択した機能の料金合計</h3>
      <button id="clearAll2" class="btn text-xs">全解除</button>
    </div>
    
    <!-- 選択項目数の表示 -->
    <div class="flex items-center gap-4 mb-4 text-sm text-gray-600">
      <div class="flex items-center gap-1">
        <div class="w-3 h-3 bg-blue-500 rounded-full"></div>
        <span>買い切り：<span id="selectedCount" class="font-semibold">0</span>項目</span>
      </div>
      <div class="flex items-center gap-1">
        <div class="w-3 h-3 bg-orange-500 rounded-full"></div>
        <span>月額：<span id="selectedMonthly" class="font-semibold">0</span>項目</span>
      </div>
    </div>

    <!-- 価格表示 -->
    <div class="space-y-3">
      <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
        <span class="text-sm font-medium">買い切り合計</span>
        <span class="price price-large"><span id="totalPrice">0</span> 円</span>
      </div>
      <div class="flex items-center justify-between p-3 bg-orange-50 rounded-lg">
        <span class="text-sm font-medium">月額合計</span>
        <span class="price"><span id="monthlyPrice">0</span> 円 / 月</span>
      </div>
    </div>

    <p class="text-xs text-gray-500 mt-3 leading-relaxed">※上の一覧表と下の実演画面は同じ項目です。月額項目（アフターサポート）は別に計算されます。</p>
  </aside>

  <script>
    // ===== Utility: get all real feature toggles (used for pricing) =====
    const realToggles = () => Array.from(document.querySelectorAll('.feature-toggle[data-key]'));
    const totalEl = document.getElementById('totalPrice');
    const monthlyEl = document.getElementById('monthlyPrice');
    const countEl = document.getElementById('selectedCount');
    const countMonthlyEl = document.getElementById('selectedMonthly');

    function calc() {
      let sum = 0, monthly = 0, cnt = 0, cntMonthly = 0;
      realToggles().forEach(chk => {
        if (chk.checked) {
          const price = Number(chk.dataset.price || 0);
          if (chk.dataset.period === 'monthly') { monthly += price; cntMonthly += 1; }
          else { sum += price; cnt += 1; }
        }
      });
      totalEl.textContent = sum.toLocaleString();
      monthlyEl.textContent = monthly.toLocaleString();
      countEl.textContent = cnt;
      countMonthlyEl.textContent = cntMonthly;
    }

    // ===== Global Select/Clear =====
    function setAll(val) { realToggles().forEach(c => c.checked = val); syncProxiesFromTargets(); calc(); }
    document.getElementById('selectAll').addEventListener('click', () => setAll(true));
    const clearAll = () => setAll(false);
    document.getElementById('clearAll').addEventListener('click', clearAll);
    document.getElementById('clearAll2').addEventListener('click', clearAll);

    // ===== Proxy checkboxes in tables =====
    function syncTargetsFromProxies(e) {
      const proxy = e.target.closest('.proxy');
      if (!proxy) return;
      const targetSel = proxy.dataset.target;
      const target = document.querySelector(targetSel);
      if (target) {
        target.checked = proxy.checked;
        target.dispatchEvent(new Event('change', { bubbles: true }));
      }
    }
    function syncProxiesFromTargets() {
      document.querySelectorAll('.proxy').forEach(proxy => {
        const t = document.querySelector(proxy.dataset.target);
        if (t) proxy.checked = t.checked;
      });
    }
    document.addEventListener('change', syncTargetsFromProxies);
    document.addEventListener('change', e => {
      if (e.target.classList.contains('feature-toggle')) { calc(); syncProxiesFromTargets(); }
    });

    // ===== Initial calc =====
    calc();

    // ===== Demo data for tables =====
    const demoRows = [
      {id:1,date:'2025-08-01',category:'general',text:'quick campaign idea'},
      {id:2,date:'2025-08-02',category:'sales',text:'monthly report draft'},
      {id:3,date:'2025-08-03',category:'general',text:'research note'},
      {id:4,date:'2025-08-04',category:'ops',text:'ops checklist'},
      {id:5,date:'2025-08-05',category:'sales',text:'follow-up template'},
      {id:6,date:'2025-08-06',category:'general',text:'team memo'},
      {id:7,date:'2025-08-07',category:'ops',text:'incident summary'},
      {id:8,date:'2025-08-08',category:'general',text:'campaign schedule'}
    ];

    // ===== File Upload Demo =====
    const demoCsvBtn = document.getElementById('demoCsvBtn');
    const imgPreviewBtn = document.getElementById('imgPreviewBtn');
    const uploadStatus = document.getElementById('uploadStatus');
    const uploadResult = document.getElementById('uploadResult');
    
    if (demoCsvBtn) {
      demoCsvBtn.addEventListener('click', () => {
        uploadStatus.textContent = 'CSV読み込み中…';
        uploadResult.innerHTML = '<div class="text-xs text-blue-600">処理中...</div>';
        setTimeout(() => {
          uploadResult.innerHTML = `
            <div class="text-xs space-y-1">
              <div class="font-semibold">読み込み完了（8件）</div>
              <div>列: id, date, category, text</div>
              <div class="text-green-600">✓ 全データ正常に処理</div>
            </div>
          `;
          uploadStatus.textContent = '読み込み完了';
        }, 800);
      });
    }

    if (imgPreviewBtn) {
      imgPreviewBtn.addEventListener('click', () => {
        uploadStatus.textContent = '画像プレビュー表示中…';
        uploadResult.style.background = 'linear-gradient(135deg,#cbd5e1,#f1f5f9)';
        uploadResult.innerHTML = '<div class="text-xs">プレビュー画像（縮小済み）<br>サイズ: 1024x768px</div>';
        setTimeout(() => { uploadStatus.textContent = 'プレビュー表示完了（1秒以内）'; }, 300);
      });
    }

    // ===== Sort/Filter/Pagination Demo =====
    const tblBody = document.querySelector('#tbl tbody');
    const pginfo = document.getElementById('pginfo');
    const prev = document.getElementById('prev');
    const next = document.getElementById('next');
    const kw = document.getElementById('kw');
    const cat = document.getElementById('cat');
    const applyBtn = document.getElementById('applyFilter');
    const exportCsv = document.getElementById('exportCsv');
    let sortKey = 'id', sortAsc = true, page = 1, pageSize = 5, viewRows = demoRows.slice();

    function refreshCats(){ const cats = Array.from(new Set(demoRows.map(r=>r.category)));
      cats.forEach(c=>{ const o=document.createElement('option'); o.value=c; o.textContent=c; cat.appendChild(o); }); }
    function apply(){ const k=(kw.value||'').toLowerCase(), c=cat.value||'';
      viewRows = demoRows.filter(r=> (!k||r.text.toLowerCase().includes(k)) && (!c||r.category===c)); page=1; render(); }
    function render(){
      const sorted = viewRows.slice().sort((a,b)=>{const av=a[sortKey], bv=b[sortKey]; return (av<bv? -1: av>bv? 1: 0) * (sortAsc?1:-1)});
      const totalPg = Math.max(1, Math.ceil(sorted.length/pageSize)); page = Math.min(page,totalPg);
      const rows = sorted.slice((page-1)*pageSize, (page-1)*pageSize+pageSize);
      tblBody.innerHTML = rows.map(r=>`<tr><td class="px-2 py-1 border">${r.id}</td><td class="px-2 py-1 border">${r.date}</td><td class="px-2 py-1 border">${r.category}</td><td class="px-2 py-1 border">${r.text}</td></tr>`).join('');
      pginfo.textContent = `${page} / ${totalPg}`;
    }
    document.querySelectorAll('#tbl thead th').forEach(th=>{
      th.addEventListener('click', ()=>{
        const k = th.getAttribute('data-k'); sortAsc = (sortKey===k)? !sortAsc : true; sortKey = k; render();
      });
    });
    prev && prev.addEventListener('click', ()=>{ page=Math.max(1,page-1); render(); });
    next && next.addEventListener('click', ()=>{ page=page+1; render(); });
    applyBtn && applyBtn.addEventListener('click', apply);
    exportCsv && exportCsv.addEventListener('click', ()=>{
      const header='id,date,category,text\n';
      const csv=viewRows.map(r=>[r.id,r.date,r.category,('"'+r.text.replace(/"/g,'""')+'"')].join(',')).join('\n');
      const blob=new Blob([header+csv],{type:'text/csv'}); const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='export.csv'; a.click();
    });
    if (cat) { refreshCats(); apply(); }

    // ===== Async task demo =====
    let tId=null, pct=0, timer=null, canceled=false;
    const taskIdEl=document.getElementById('taskId');
    const taskState=document.getElementById('taskState');
    const taskPct=document.getElementById('taskPct');
    const taskBar=document.getElementById('taskBar');
    const taskStart=document.getElementById('taskStart');
    const taskCancel=document.getElementById('taskCancel');
    function resetTask(){ tId=null;pct=0;canceled=false; taskBar.style.width='0%';taskPct.textContent='0%';taskState.textContent='待機';taskIdEl.textContent='-'; if(timer){clearInterval(timer);timer=null;} }
    taskStart && taskStart.addEventListener('click', ()=>{
      resetTask(); tId='T'+Math.random().toString(36).slice(2,8).toUpperCase(); taskIdEl.textContent=tId; taskState.textContent='実行中';
      timer=setInterval(()=>{ if(canceled){ taskState.textContent='キャンセル済み'; clearInterval(timer); return; }
        pct += 5 + Math.floor(Math.random()*6);
        if(pct>=100){ pct=100; taskBar.style.width='100%'; taskPct.textContent='100%'; taskState.textContent='完了'; clearInterval(timer); }
        else { taskBar.style.width=pct+'%'; taskPct.textContent=pct+'%'; } }, 500);
    });
    taskCancel && taskCancel.addEventListener('click', ()=>{ canceled=true; });

    // ===== AI Step Flow Demo =====
    const kwStep = document.getElementById('kwStep');
    const useAI = document.getElementById('useAI');
    const genIdeas = document.getElementById('genIdeas');
    const genHeads = document.getElementById('genHeads');
    const genBody = document.getElementById('genBody');
    const ideas = document.getElementById('ideas');
    const heads = document.getElementById('heads');
    const bodyOut = document.getElementById('bodyOut');

    const templates = {
      '時短レシピ': ['10分で完成', '材料3つだけ', '冷凍食品活用', '作り置き可能', '電子レンジのみ'],
      '健康管理': ['運動習慣', '食事バランス', '睡眠改善', 'ストレス解消', '定期検診']
    };

    genIdeas && genIdeas.addEventListener('click', () => {
      const kw = kwStep.value.trim() || '時短レシピ';
      ideas.innerHTML = '';
      const list = templates[kw] || ['案1', '案2', '案3', '案4', '案5'];
      list.forEach(item => {
        const opt = document.createElement('option');
        opt.value = item;
        opt.textContent = useAI.checked ? `AI生成: ${item}の詳細アプローチ` : `テンプレート: ${item}`;
        ideas.appendChild(opt);
      });
    });

    genHeads && genHeads.addEventListener('click', () => {
      if (ideas.selectedIndex >= 0) {
        heads.innerHTML = '';
        ['見出し1', '見出し2', '見出し3'].forEach((h, i) => {
          const opt = document.createElement('option');
          opt.value = h;
          opt.textContent = `${ideas.value} - ${h}`;
          heads.appendChild(opt);
        });
      }
    });

    genBody && genBody.addEventListener('click', () => {
      if (heads.selectedIndex >= 0) {
        bodyOut.value = `${heads.value}についての詳細な説明文がここに生成されます。\n\n具体的な手順や方法を含む本文コンテンツ...`;
      }
    });

    // ===== Initial proxy sync =====
    syncProxiesFromTargets();
  </script>
</body>
</html>